@model ZdtbSite.Web.Areas.ZdtbAdmin.Models.ArticleDataViewModel


@section PageHeader{
    文章发布 > 行业新闻
}
@{
    ViewBag.Title = "发布行业新闻";
    Html.EnableClientValidation();
    Html.EnableUnobtrusiveJavaScript();
}

<div class="fluid-container">
    <section id="widget-grid" class="">
        <div class="row">
            <article class="col-md-12">
                <!-- new widget -->
                <div class="jarviswidget" id="widget-id-0" role="widget">
                    <header>
                        <h2>行业新闻</h2>
                    </header>
                    <div>

                        <div class="inner-spacer">
                            <!-- content goes here -->
                            <form class="form-horizontal themed" method="post" action="@Url.Action("Add")">
                                <fieldset>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-3">@Html.LabelFor(m => m.Article.Title)</div>
                                            <div class="col-md-9">
                                                @Html.TextBoxFor(m => m.Article.Title, new { @class = "form-control", autofocus = "" })
                                                @Html.ValidationMessageFor(m => m.Article.Title)
                                                @*<input type="text" class="form-control" id="input01" />*@
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-3">@Html.LabelFor(m => m.Article.Tag)</div>
                                            <div class="col-md-9">
                                                @Html.TextBoxFor(m => m.Article.Tag, new { @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.Article.Tag)
                                            </div>
                                        </div>
                                    </div>
                                    @*<div class="form-group">
                                        <div class="row">
                                            <div class="col-md-3">@Html.LabelFor(m => m.Article.ContentType)</div>
                                            <div class="col-md-9">
                                                @Html.DropDownListFor(m => m.Article.ContentTypeId, items, new { @class = "with-search" })
                                            </div>
                                        </div>
                                    </div>*@
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-3">@Html.LabelFor(m => m.Article.IsPublish)</div>
                                            <div class="col-md-9">
                                                <label class="checkbox">

                                                    @Html.CheckBoxFor(m => m.Article.IsPublish, new { @class = "form-control", @checked = "" }) 是否发布
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-3">@Html.LabelFor(m => m.Article.Content)</div>
                                            <div class="col-md-9">
                                                @Html.TextAreaFor(m => m.Article.Content, new { @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.Article.Content)
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <input type="file" id="fileElem" name="fileElem" onchange="handleFiles(this)" />
                                            </div>
                                            <div class="col-md-9">
                                                <div id="fileList" style="height:250px;">
                                                    <div></div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                    <div class="form-group">
                                        <div class="row" style="text-align:right">
                                            <div class="col-md-12">
                                                <button type="reset" name="name" class="btn btn-danger">
                                                    <i class="icon-repeat icon-white"></i> 重置
                                                </button>

                                                <button type="submit" name="name" class="btn btn-primary">
                                                    <i class="icon-ok-sign icon-white"></i> 保存
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>
</div>

@section script{

    <link href="~/Areas/ZdtbAdmin/Content/js/kindeditor/themes/default/default.css" rel="stylesheet" />
    <script src="~/Areas/ZdtbAdmin/Content/js/kindeditor/kindeditor-min.js"></script>
    <script src="~/Areas/ZdtbAdmin/Content/js/kindeditor/lang/zh_CN.js"></script>
<script src="~/Areas/ZdtbAdmin/Content/js/kindeditor.code.js"></script>
    <script>
        window.URL = window.URL || window.webkitURL;
        var fileElem = document.getElementById("fileElem"),
            fileList = document.getElementById("fileList");
        function handleFiles(obj) {
            var files = obj.files,
                img = new Image();
            //if (fileElem.children) fileList.removeChild(fileList.children);
            if (window.URL) {
                //File API
                //alert(files[0].name + "," + files[0].size + " bytes");
                img.src = window.URL.createObjectURL(files[0]); //创建一个object URL，并不是你的本地路径
                img.height = 250;
                img.onload = function (e) {
                    window.URL.revokeObjectURL(this.src); //图片加载后，释放object URL
                }
                fileList.replaceChild(img, fileList.firstElementChild);
            } else if (window.FileReader) {
                //opera不支持createObjectURL/revokeObjectURL方法。我们用FileReader对象来处理
                var reader = new FileReader();
                reader.readAsDataURL(files[0]);
                reader.onload = function (e) {
                    //alert(files[0].name + "," + e.total + " bytes");
                    img.src = this.result;
                    img.width = 200;
                    fileList.replaceChild(img, fileList.firstElementChild);
                }
            } else {
                //ie
                obj.select();
                obj.blur();
                var nfile = document.selection.createRange().text;
                document.selection.empty();
                img.src = nfile;
                img.width = 200;
                img.onload = function () {
                    alert(nfile + "," + img.fileSize + " bytes");
                }
                fileList.replaceChild(img, fileList.firstElementChild);
                //fileList.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='image',src='"+nfile+"')";
            }
        }

        @*var editor;
        KindEditor.ready(function (K) {
            editor = K.create('textarea', {
                uploadJson: '@Url.Action("Upload","FileManager")',
                fileManagerJson: '@Url.Action("Index","FileManager")',
                height: 500,
                items: [
        'source', '|', 'undo', 'redo', '|', 'preview', 'print', 'template', 'cut', 'copy', 'paste',
        'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',
        'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',
        'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '/',
        'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
        'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage',
        'insertfile', 'table', 'hr', 'emoticons', 'baidumap', 'pagebreak',
        'anchor', 'link', 'unlink', '|', 'about'
                ],
                allowFileManager: true
            });
        });
        $(function () {
            $(".btn").click(function () {
                editor.sync();
            });
        });*@
    </script>
}